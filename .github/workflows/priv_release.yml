name: Call release workflow

on:
  push:
    branches:
      - priv-release

concurrency:
  group: priv-release-${{ github.ref }}
  cancel-in-progress: true

jobs:
  call-workflow-passing-data:
    permissions:
      contents: read
      pull-requests: write
    uses: Oneflow-Inc/oneflow/.github/workflows/release.yml@priv-release
    with:
      is_priv: true
    secrets:
      ONEFLOW_PRIV_ORG: ${{ secrets.ONEFLOW_PRIV_ORG }}
      CI_PERSONAL_ACCESS_TOKEN: ${{ secrets.CI_PERSONAL_ACCESS_TOKEN }}
      ONEFLOW_PRIV_OSS_PREFIX: ${{ secrets.ONEFLOW_PRIV_OSS_PREFIX }}
      OSS_ACCESS_KEY_ID: ${{ secrets.OSS_ACCESS_KEY_ID }}
      OSS_ACCESS_KEY_SECRET: ${{ secrets.OSS_ACCESS_KEY_SECRET }}
