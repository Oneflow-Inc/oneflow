syntax = "proto2";
package oneflow;

import "oneflow/core/register/logical_blob_id.proto";
import "oneflow/core/operator/op_conf.proto";

message InputBlobModifier {
  optional bool is_mutable = 1 [default = false];
  optional bool use_header_only = 2 [default = false];
  optional bool requires_grad = 3 [default = false];
}

message OutputBlobModifier {
  optional bool is_mutable = 1 [default = false];
  optional bool requires_grad = 2 [default = false];
  oneof inplace_type {
    string mutable_inplace_ibn = 3;
    string const_inplace_ibn = 4;
  }
}

message OpAttribute {
  required OperatorConf op_conf = 1;
  map<string, LogicalBlobId> bn_in_op2lbi = 2;

  repeated string input_bns = 3;
  repeated string output_bns = 4;
  repeated string tmp_bns = 5;
  repeated string const_buf_bns = 6;

  map<string, InputBlobModifier> ibn2input_blob_modifier = 15;
  map<string, OutputBlobModifier> obn2output_blob_modifier = 16;
}
